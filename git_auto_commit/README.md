# Git Auto-Commit: AI é©…å‹•çš„è‡ªå‹•åŒ–æäº¤å·¥å…·

ä¸€å€‹æ™ºæ…§å‹ Git æäº¤å·¥å…·ï¼Œä½¿ç”¨ AI æœå‹™ (Claude, Gemini, OpenAI) è‡ªå‹•åˆ†æç¨‹å¼ç¢¼è®Šæ›´ä¸¦ç”Ÿæˆç¬¦åˆè¦ç¯„çš„ commit messageã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ¤– **å¤šæœå‹™æ”¯æ´**: å¯é¸æ“‡ Claude, Gemini, æˆ– OpenAIã€‚
- ğŸ“ **æ™ºæ…§ç”Ÿæˆ**: åˆ†æ Git è®Šæ›´ï¼Œç”Ÿæˆ 5 å€‹é«˜å“è³ªçš„ commit message å»ºè­°ã€‚
- ğŸ¯ **å®Œæ•´æ ¼å¼**: æ”¯æ´æ¨™æº–çš„ commit æ ¼å¼ï¼ˆsubject + bodyï¼‰ã€‚
- ğŸ” **å³æ™‚é è¦½**: åœ¨é¸æ“‡æ™‚å¯æŸ¥çœ‹å®Œæ•´çš„ commit å…§å®¹ã€‚
- âœ¨ **è‡ªå‹•æš«å­˜**: è‡ªå‹•å°‡æ‰€æœ‰è®Šæ›´åŠ å…¥æš«å­˜å€ (`git add .`)ã€‚
- ğŸ¨ **å½©è‰²ä»‹é¢**: æ˜“æ–¼é–±è®€çš„å½©è‰²è¼¸å‡ºã€‚
- ğŸ—‘ï¸ **è‡ªå‹•æ¸…ç†**: è‡¨æ™‚æª”æ¡ˆåœ¨è…³æœ¬çµæŸæ™‚è‡ªå‹•åˆªé™¤ã€‚

## éœ€æ±‚é™åˆ¶

### ç³»çµ±éœ€æ±‚
- **ä½œæ¥­ç³»çµ±**: macOS / Linux
- **Shell**: Bash 4.0+
- **Git**: 2.0+

### å¿…è¦å·¥å…·
- **fzf**: å‘½ä»¤è¡Œæ¨¡ç³Šæœå°‹å·¥å…·
  ```bash
  # macOS å®‰è£
  brew install fzf

  # Linux å®‰è£
  git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
  ~/.fzf/install
  ```

### API é‡‘é‘°è¨­å®š
ä½ éœ€è¦ç‚ºä½ é¸æ“‡çš„ AI æœå‹™è¨­å®šç’°å¢ƒè®Šæ•¸ï¼š

- **For Claude**:
  - éœ€è¦å®‰è£ Claude CLI: `npm install -g @anthropics/claude-cli`
- **For Gemini**:
  - `export GEMINI_API_KEY='your-api-key'`
  - å–å¾—é‡‘é‘°: [makersuite.google.com/app/apikey](https://makersuite.google.com/app/apikey)
- **For OpenAI**:
  - `export OPENAI_API_KEY='your-api-key'`
  - å–å¾—é‡‘é‘°: [platform.openai.com/api-keys](https://platform.openai.com/api-keys)

## å®‰è£æ–¹å¼

### è¨­å®š Git Alias (å»ºè­°)

```bash
# å°‡ git-auto-commit.sh æ”¾åœ¨ä½ å–œæ­¡çš„ä½ç½®ï¼Œä¾‹å¦‚ /usr/local/bin
# cp git-auto-commit.sh /usr/local/bin/git-auto-commit
# chmod +x /usr/local/bin/git-auto-commit

# è¨­å®š git alias 'ac'
git config --global alias.ac '!/path/to/your/git-auto-commit.sh'

# ä½¿ç”¨æ–¹å¼
git ac
```

## æ“ä½œæ–¹å¼

### åŸºæœ¬ä½¿ç”¨
åœ¨ä½ çš„ Git å°ˆæ¡ˆä¸­åŸ·è¡Œ `git ac` ä¸¦åŠ ä¸Šæœå‹™é¸é …ã€‚

#### 1. ä½¿ç”¨ Claude (é è¨­)
```bash
# ä½¿ç”¨é è¨­æ¨¡å‹ (sonnet)
git ac

# æˆ–æ˜ç¢ºæŒ‡å®š
git ac -s claude

# ä½¿ç”¨ç‰¹å®šæ¨¡å‹ (e.g., opus)
git ac -s claude -m opus
```

#### 2. ä½¿ç”¨ Gemini
```bash
# ä½¿ç”¨é è¨­æ¨¡å‹ (gemini-2.5-flash)
git ac -s gemini

# ä½¿ç”¨ç‰¹å®šæ¨¡å‹ (e.g., gemini-2.5-pro)
git ac -s gemini -m gemini-2.5-pro
```

#### 3. ä½¿ç”¨ OpenAI
```bash
# ä½¿ç”¨é è¨­æ¨¡å‹ (gpt-4)
git ac -s openai

# ä½¿ç”¨ç‰¹å®šæ¨¡å‹ (e.g., gpt-4-turbo)
git ac -s openai -m gpt-4-turbo
```

### æµç¨‹èªªæ˜
1.  è…³æœ¬è‡ªå‹•åµæ¸¬ Git è®Šæ›´ã€‚
2.  å‘¼å«æŒ‡å®šçš„ AI æœå‹™åˆ†æè®Šæ›´ä¸¦ç”Ÿæˆ 5 å€‹ commit å»ºè­°ã€‚
3.  ä½¿ç”¨ `fzf` ä»‹é¢é¸æ“‡åˆé©çš„ commit messageã€‚
4.  é è¦½çª—å£é¡¯ç¤ºå®Œæ•´çš„ commit å…§å®¹ã€‚
5.  è‡ªå‹•å°‡æ‰€æœ‰è®Šæ›´åŠ å…¥æš«å­˜å€ (`git add .`)ã€‚
6.  ç¢ºèªå¾ŒåŸ·è¡Œæäº¤ã€‚

### èª¿è©¦æ¨¡å¼
é‡åˆ°å•é¡Œæ™‚å¯å•Ÿç”¨èª¿è©¦æ¨¡å¼ï¼š
```bash
DEBUG=1 git ac -s gemini
```
èª¿è©¦æ¨¡å¼æœƒé¡¯ç¤º AI çš„åŸå§‹å›æ‡‰ã€è§£æå‡ºçš„ commit å…§å®¹ç­‰è³‡è¨Šã€‚

## Commit Message è¦ç¯„

è…³æœ¬ç”Ÿæˆçš„ commit éµå¾ªä»¥ä¸‹è¦ç¯„ï¼š

### Type é¡åˆ¥
- `feat`: æ–°å¢/ä¿®æ”¹åŠŸèƒ½
- `fix`: ä¿®è£œ bug
- `docs`: æ–‡ä»¶
- `style`: æ ¼å¼ï¼ˆä¸å½±éŸ¿ç¨‹å¼ç¢¼é‹è¡Œçš„è®Šå‹•ï¼‰
- `refactor`: é‡æ§‹
- `perf`: æ”¹å–„æ•ˆèƒ½
- `test`: å¢åŠ æ¸¬è©¦
- `chore`: å»ºæ§‹ç¨‹åºæˆ–è¼”åŠ©å·¥å…·çš„è®Šå‹•
- `revert`: æ’¤éŠ·å›è¦†å…ˆå‰çš„ commit

### æ ¼å¼è¦ç¯„
```
type: subject (æœ€å¤š 50 å­—å…ƒ)

body èªªæ˜ç‚ºä»€éº¼é€™å€‹è®Šå‹•æ˜¯å¿…è¦çš„ï¼Œ
å¦‚ä½•è§£æ±ºå•é¡Œï¼Œä»¥åŠè®Šå‹•å‰å¾Œçš„å·®ç•°ã€‚
æ¯è¡Œä¸è¶…é 72 å­—å…ƒã€‚
```

## æŠ€è¡“å¯¦ä½œç´°ç¯€

### æ•ˆèƒ½å„ªåŒ–
- **ç²¾ç°¡æç¤ºè©**ï¼šä½¿ç”¨å„ªåŒ–çš„æç¤ºè©æ ¼å¼ï¼Œæé«˜å›æ‡‰é€Ÿåº¦
- **æ™ºæ…§åˆ†æ**ï¼šå®Œæ•´åˆ†ææ‰€æœ‰ç¨‹å¼ç¢¼è®Šå‹•ï¼Œæä¾›æº–ç¢ºçš„ commit å»ºè­°

### æª”æ¡ˆç®¡ç†
- **è‡¨æ™‚ç›®éŒ„**ï¼šä½¿ç”¨ `mktemp -d` å‰µå»ºå®‰å…¨çš„è‡¨æ™‚ç›®éŒ„
- **è‡ªå‹•æ¸…ç†**ï¼šä½¿ç”¨ `trap` ç¢ºä¿è‡¨æ™‚æª”æ¡ˆåœ¨è…³æœ¬é€€å‡ºæ™‚è¢«æ¸…ç†
- **é è¦½è…³æœ¬**ï¼šå‹•æ…‹ç”Ÿæˆé è¦½è…³æœ¬ä»¥é¡¯ç¤ºå®Œæ•´ commit å…§å®¹

### Commit è™•ç†
- **å¤šè¡Œæ”¯æ´**ï¼šä½¿ç”¨ `git commit -F` å¾æª”æ¡ˆè®€å–ï¼Œæ­£ç¢ºè™•ç†å¤šè¡Œ commit message
- **æ ¼å¼ä¿æŒ**ï¼šè‡ªå‹•è™•ç† subject å’Œ body ä¹‹é–“çš„ç©ºè¡Œ

## æ³¨æ„äº‹é …

1. **è‡ªå‹•åŠ å…¥æš«å­˜å€**ï¼šè…³æœ¬æœƒè‡ªå‹•åŸ·è¡Œ `git add .`ï¼Œè«‹ç¢ºèªæ²’æœ‰ä¸æƒ³æäº¤çš„æª”æ¡ˆ
2. **éœ€è¦ç¶²è·¯é€£ç·š**ï¼šéœ€è¦é€£ç·šåˆ° Claude API
3. **API ä½¿ç”¨é™åˆ¶**ï¼šé »ç¹ä½¿ç”¨å¯èƒ½å—åˆ° API é€Ÿç‡é™åˆ¶
4. **æ•æ„Ÿè³‡è¨Š**ï¼šé¿å…åœ¨åŒ…å«å¯†ç¢¼ã€API key ç­‰æ•æ„Ÿè³‡è¨Šçš„è®Šæ›´ä¸­ä½¿ç”¨

## ç–‘é›£æ’è§£

### å•é¡Œï¼šé¡¯ç¤ºã€Œç„¡æ³•èª¿ç”¨ claudeã€
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- æª¢æŸ¥ Claude CLI æ˜¯å¦å·²å®‰è£ï¼š`which claude`
- ç¢ºèª Claude CLI å·²æ­£ç¢ºè¨­å®š API key

### å•é¡Œï¼šfzf é è¦½çª—å£ç„¡æ³•é¡¯ç¤º
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- ç¢ºèª fzf ç‰ˆæœ¬ï¼š`fzf --version`ï¼ˆéœ€è¦ 0.20.0 ä»¥ä¸Šï¼‰
- å˜—è©¦æ›´æ–° fzfï¼š`brew upgrade fzf`

### å•é¡Œï¼šç„¡æ³•æå–é¸æ“‡çš„ç´¢å¼•
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨èª¿è©¦æ¨¡å¼æŸ¥çœ‹è©³æƒ…ï¼š`DEBUG=1 git auto-commit`
- ç¢ºèª shell ç’°å¢ƒè®Šæ•¸

## æ›´æ–°æ—¥èªŒ

è©³ç´°çš„è®Šæ›´æ­·å²è«‹åƒé–± [CHANGELOG.md](changelog.md)ã€‚

## æˆæ¬Š

MIT License

## ä½œè€…

Created with Claude Code

---

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿æå‡º Issue æˆ– Pull Requestï¼